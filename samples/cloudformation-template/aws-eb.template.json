######################
Generated by AWS Elastic Beanstalk 
$ mkdir HelloWorld
$ cd HelloWorld
$ eb init -p PHP
$ echo "Hello World" > index.html
$ eb create dev-env
$ eb open
Do some changes index.html or add files/folders.
$ eb deploy
######################

{
   "Outputs":{
      "AWSEBLoadBalancerURL":{
         "Value":{
            "Fn::Join":[
               "",
               [
                  "http:\/\/",
                  {
                     "Fn::GetAtt":[
                        "AWSEBLoadBalancer",
                        "DNSName"
                     ]
                  }
               ]
            ]
         },
         "Description":"The ElasticBeanstalk ELB URL of the website"
      }
   },
   "Parameters":{
      "HooksPkgUrl":{
         "Default":"https:\/\/s3-us-west-2.amazonaws.com\/elasticbeanstalk-env-resources-us-west-2\/stalks\/eb_php_3.1.1\/lib\/assets.tar.gz",
         "NoEcho":"true",
         "Description":"URL to hooks package",
         "Type":"String"
      },
      "LogPublicationControl":{
         "Default":"false",
         "NoEcho":"true",
         "Description":"If true customer service logs will be published to S3.",
         "AllowedValues":[
            "true",
            "false"
         ],
         "Type":"String",
         "ConstraintDescription":"must be Boolean."
      },
      "AWSEBAgentId":{
         "Default":"",
         "NoEcho":"true",
         "Type":"String"
      },
      "AWSEBEnvironmentName":{
         "NoEcho":"true",
         "Type":"String"
      },
      "AllowUrlFopen":{
         "Default":"On",
         "NoEcho":"true",
         "Description":"Specifies whether the PHP's file functions are allowed to retrieve data from remote locations, such as websites or FTP servers. (This value is written to the php.ini file.)",
         "Type":"String"
      },
      "MemoryLimit":{
         "Default":"256M",
         "NoEcho":"true",
         "Description":"Specifies the amount of memory allocated to the PHP environment. (This value is written to the php.ini file.)",
         "Type":"String"
      },
      "InstanceType":{
         "Default":"t1.micro",
         "NoEcho":"true",
         "Description":"WebServer EC2 instance type",
         "AllowedValues":[
            "t1.micro",
            "t2.micro",
            "t2.small",
            "t2.medium",
            "m1.small",
            "m1.medium",
            "m1.large",
            "m1.xlarge",
            "c1.medium",
            "c1.xlarge",
            "m2.xlarge",
            "m2.2xlarge",
            "m2.4xlarge",
            "m3.medium",
            "m3.large",
            "m3.xlarge",
            "m3.2xlarge",
            "c3.large",
            "c3.xlarge",
            "c3.2xlarge",
            "c3.4xlarge",
            "c3.8xlarge",
            "cc2.8xlarge",
            "hi1.4xlarge",
            "hs1.8xlarge",
            "cr1.8xlarge",
            "g2.2xlarge",
            "i2.xlarge",
            "i2.2xlarge",
            "i2.4xlarge",
            "i2.8xlarge",
            "r3.large",
            "r3.xlarge",
            "r3.2xlarge",
            "r3.4xlarge",
            "r3.8xlarge"
         ],
         "Type":"String",
         "ConstraintDescription":"must be a valid EC2 instance type."
      },
      "AWSEBReferrerId":{
         "Default":"",
         "NoEcho":"true",
         "Type":"String"
      },
      "DocumentRoot":{
         "Default":"",
         "NoEcho":"true",
         "Description":"Enables you to specify the child directory of your project that is treated as the public-facing web root. If your root document is stored in your project directory, leave this set to \"\/\". If your root document is inside a child directory (e.g., <project>\/public), set this value to match the child directory. Values should begin with a \"\/\" character, and may NOT begin with a \".\" character.",
         "Type":"String"
      },
      "InstancePort":{
         "Default":"80",
         "NoEcho":"true",
         "Description":"Listen Port",
         "Type":"String"
      },
      "DisplayErrors":{
         "Default":"Off",
         "NoEcho":"true",
         "Description":"Specifies whether error messages should be part of the output. (This value is written to the php.ini file.)",
         "Type":"String"
      },
      "AWSEBEnvironmentId":{
         "NoEcho":"true",
         "Type":"String"
      },
      "MaxExecutionTime":{
         "Default":60,
         "NoEcho":"true",
         "Description":"Sets the maximum time, in seconds, a script is allowed to run before it is terminated by the environment. This helps prevent poorly written scripts from tying up the server.",
         "Type":"Number"
      },
      "ZlibOutputCompression":{
         "Default":"Off",
         "NoEcho":"true",
         "Description":"Specifies whether PHP should use compression for output. (This value is written to the php.ini file.)",
         "Type":"String"
      },
      "AWSEBEnvironmentBucket":{
         "NoEcho":"true",
         "Type":"String"
      },
      "ComposerOptions":{
         "Default":"",
         "NoEcho":"true",
         "Description":"Sets custom options to use when installing dependencies using Composer through composer.phar install",
         "Type":"String"
      },
      "AppSource":{
         "Default":"http:\/\/s3-us-west-2.amazonaws.com\/elasticbeanstalk-samples-us-west-2\/php-newsample-app.zip",
         "NoEcho":"true",
         "Description":"The url of the application source.",
         "Type":"String"
      },
      "EnvironmentVariables":{
         "Default":"AWS_ACCESS_KEY_ID=,AWS_SECRET_KEY=,PARAM1=,PARAM2=,PARAM3=,PARAM4=,PARAM5=",
         "NoEcho":"true",
         "Description":"Program environment variables.",
         "Type":"CommaDelimitedList"
      }
   },
   "Description":"AWS Elastic Beanstalk environment (Name: 'dev-env'  Id: 'e-tmumus2mmu')",
   "Mappings":{
      "EnvironmentInfoTasks":{
         "systemtail":{
            "AutoClean":"true",
            "CommandName":"CMD-SystemTailLogs",
            "LocationPrefix":"resources\/environments\/logs\/systemtail\/"
         },
         "bundle":{
            "AutoClean":"true",
            "CommandName":"CMD-BundleLogs",
            "LocationPrefix":"resources\/environments\/logs\/bundle\/"
         },
         "publish":{
            "LocationPrefix":"resources\/environments\/logs\/publish\/"
         },
         "tail":{
            "AutoClean":"true",
            "CommandName":"CMD-TailLogs",
            "LocationPrefix":"resources\/environments\/logs\/tail\/"
         }
      },
      "AWSEBOptions":{
         "options":{
            "FastVersionDeployment":"true",
            "nodeploymentOnStartup":"true",
            "rpms":"https:\/\/s3-us-west-2.amazonaws.com\/elasticbeanstalk-env-resources-us-west-2\/stalks\/eb_php_3.1.1\/lib\/python-certifi-0.0.8-2.3.amzn1.noarch.rpm https:\/\/s3-us-west-2.amazonaws.com\/elasticbeanstalk-env-resources-us-west-2\/stalks\/eb_php_3.1.1\/lib\/aws-cfn-bootstrap-1.4-eb.noarch.rpm https:\/\/s3-us-west-2.amazonaws.com\/elasticbeanstalk-env-resources-us-west-2\/stalks\/eb_php_3.1.1\/lib\/aws-elasticbeanstalk-tools-1.13-1.noarch.rpm",
            "CloudConfigOptions":"cloud_final_modules:\n - [scripts-user, always]",
            "HaltStartupCommandsOnFailure":"true",
            "tarballs":"https:\/\/s3-us-west-2.amazonaws.com\/elasticbeanstalk-env-resources-us-west-2\/stalks\/eb_php_3.1.1\/lib\/eb-ruby-2.1.2-x86_64-1407180207.tar.gz",
            "DefaultSSHPort":"22",
            "PhpVersion":"5.5",
            "guid":"5000d1ef00d5",
            "UserDataScript":"https:\/\/s3-us-west-2.amazonaws.com\/elasticbeanstalk-env-resources-us-west-2\/stalks\/eb_php_3.1.1\/lib\/UserDataScript.sh",
            "DefaultsScript":"\/opt\/elasticbeanstalk\/support\/containerDefaults",
            "LeaderTestScript":"\/opt\/elasticbeanstalk\/bin\/leader-test.sh",
            "ebgems":"https:\/\/s3-us-west-2.amazonaws.com\/elasticbeanstalk-env-resources-us-west-2\/stalks\/eb_php_3.1.1\/lib\/beanstalk-core-1.0.gem https:\/\/s3-us-west-2.amazonaws.com\/elasticbeanstalk-env-resources-us-west-2\/stalks\/eb_php_3.1.1\/lib\/executor-1.0.gem",
            "LaunchType":"Migration",
            "pythonlibs":"https:\/\/s3-us-west-2.amazonaws.com\/elasticbeanstalk-env-resources-us-west-2\/stalks\/eb_php_3.1.1\/lib\/requests-0.13.5.tar.gz#md5=805fd122b4cfd224e15ff2f5288c5ba0 https:\/\/s3-us-west-2.amazonaws.com\/elasticbeanstalk-env-resources-us-west-2\/stalks\/eb_php_3.1.1\/lib\/tailer-0.3.tar.gz#md5=9d1fc073e48ca682786d50c077e823ce",
            "EBSNSTopicArn":"",
            "downloadSourceBundleScriptLocation":[
               "https:\/\/elasticbeanstalk-env-resources-us-west-2.s3.amazonaws.com\/eb_patching_resources\/download_source_bundle.py"
            ],
            "EmbeddedConfigsetsEnabled":"true"
         }
      },
      "AWSEBAWSRegionArch2AMI":{
         "sa-east-1":{
            "pv":"ami-97a7138a",
            "graphics":"",
            "hvm":"ami-93a7138e",
            "gpu":""
         },
         "ap-northeast-1":{
            "pv":"ami-abd4e2aa",
            "graphics":"ami-5dd1ff5c",
            "hvm":"ami-add4e2ac",
            "gpu":""
         },
         "eu-west-1":{
            "pv":"ami-5c24882b",
            "graphics":"ami-00913777",
            "hvm":"ami-5824882f",
            "gpu":"ami-42248835"
         },
         "us-east-1":{
            "pv":"ami-6c1ca404",
            "graphics":"ami-3a329952",
            "hvm":"ami-8a1ba3e2",
            "gpu":"ami-9e1ba3f6"
         },
         "us-west-1":{
            "pv":"ami-f74653b2",
            "graphics":"ami-331b1376",
            "hvm":"ami-f14653b4",
            "gpu":""
         },
         "us-west-2":{
            "pv":"ami-8bf4b8bb",
            "graphics":"ami-47296a77",
            "hvm":"ami-89f4b8b9",
            "gpu":""
         },
         "ap-southeast-2":{
            "pv":"ami-cd422ff7",
            "graphics":"ami-e98ae9d3",
            "hvm":"ami-cf422ff5",
            "gpu":""
         },
         "ap-southeast-1":{
            "pv":"ami-2e61407c",
            "graphics":"ami-fabe9aa8",
            "hvm":"ami-2a614078",
            "gpu":""
         }
      },
      "AWSEBAWSInstanceType2Arch":{
         "cg1.4xlarge":{
            "Arch":"gpu"
         },
         "hs1.8xlarge":{
            "Arch":"pv"
         },
         "m1.large":{
            "Arch":"pv"
         },
         "i2.4xlarge":{
            "Arch":"hvm"
         },
         "m1.xlarge":{
            "Arch":"pv"
         },
         "c3.4xlarge":{
            "Arch":"hvm"
         },
         "c3.8xlarge":{
            "Arch":"hvm"
         },
         "m3.xlarge":{
            "Arch":"pv"
         },
         "t2.medium":{
            "Arch":"hvm"
         },
         "c3.2xlarge":{
            "Arch":"hvm"
         },
         "t2.micro":{
            "Arch":"hvm"
         },
         "m3.2xlarge":{
            "Arch":"pv"
         },
         "m1.small":{
            "Arch":"pv"
         },
         "r3.2xlarge":{
            "Arch":"hvm"
         },
         "t2.small":{
            "Arch":"hvm"
         },
         "r3.8xlarge":{
            "Arch":"hvm"
         },
         "m2.xlarge":{
            "Arch":"pv"
         },
         "m2.2xlarge":{
            "Arch":"pv"
         },
         "m3.large":{
            "Arch":"pv"
         },
         "r3.large":{
            "Arch":"hvm"
         },
         "m1.medium":{
            "Arch":"pv"
         },
         "r3.4xlarge":{
            "Arch":"hvm"
         },
         "m3.medium":{
            "Arch":"pv"
         },
         "g2.2xlarge":{
            "Arch":"graphics"
         },
         "cr1.8xlarge":{
            "Arch":"hvm"
         },
         "c3.xlarge":{
            "Arch":"hvm"
         },
         "c3.large":{
            "Arch":"hvm"
         },
         "cc2.8xlarge":{
            "Arch":"hvm"
         },
         "m2.4xlarge":{
            "Arch":"pv"
         },
         "i2.8xlarge":{
            "Arch":"hvm"
         },
         "t1.micro":{
            "Arch":"pv"
         },
         "cc1.4xlarge":{
            "Arch":"hvm"
         },
         "hi1.4xlarge":{
            "Arch":"pv"
         },
         "c1.medium":{
            "Arch":"pv"
         },
         "r3.xlarge":{
            "Arch":"hvm"
         },
         "c1.xlarge":{
            "Arch":"pv"
         },
         "i2.2xlarge":{
            "Arch":"hvm"
         },
         "i2.xlarge":{
            "Arch":"hvm"
         }
      },
      "ContainerMeta":{
         "AMIMeta":{
            "AMIVersion":"2014.09.0",
            "RepoReleaseVersion":"2014.09"
         }
      },
      "AWSEBAWSRegionArch2AMIBase":{
         "sa-east-1":{
            "pv":"ami-9d6cc680",
            "graphics":"",
            "hvm":"ami-956cc688",
            "gpu":""
         },
         "ap-northeast-1":{
            "pv":"ami-21072820",
            "graphics":"ami-5dd1ff5c",
            "hvm":"ami-35072834",
            "gpu":""
         },
         "eu-west-1":{
            "pv":"ami-aa8f28dd",
            "graphics":"ami-00913777",
            "hvm":"ami-748e2903",
            "gpu":"ami-728e2905"
         },
         "us-east-1":{
            "pv":"ami-50842d38",
            "graphics":"ami-3a329952",
            "hvm":"ami-08842d60",
            "gpu":"ami-1a842d72"
         },
         "us-west-1":{
            "pv":"ami-c7a8a182",
            "graphics":"ami-331b1376",
            "hvm":"ami-cfa8a18a",
            "gpu":""
         },
         "us-west-2":{
            "pv":"ami-af86c69f",
            "graphics":"ami-47296a77",
            "hvm":"ami-8786c6b7",
            "gpu":""
         },
         "ap-southeast-2":{
            "pv":"ami-8b4724b1",
            "graphics":"ami-e98ae9d3",
            "hvm":"ami-fd4724c7",
            "gpu":""
         },
         "ap-southeast-1":{
            "pv":"ami-20e1c572",
            "graphics":"ami-fabe9aa8",
            "hvm":"ami-d6e1c584",
            "gpu":""
         }
      }
   },
   "AWSTemplateFormatVersion":"2010-09-09",
   "Resources":{
      "AWSEBAutoScalingLaunchConfiguration":{
         "Type":"AWS::AutoScaling::LaunchConfiguration",
         "Properties":{
            "IamInstanceProfile":"aws-elasticbeanstalk-ec2-role",
            "ImageId":{
               "Fn::FindInMap":[
                  "AWSEBAWSRegionArch2AMI",
                  {
                     "Ref":"AWS::Region"
                  },
                  {
                     "Fn::FindInMap":[
                        "AWSEBAWSInstanceType2Arch",
                        {
                           "Ref":"InstanceType"
                        },
                        "Arch"
                     ]
                  }
               ]
            },
            "InstanceMonitoring":false,
            "SecurityGroups":[
               {
                  "Ref":"AWSEBSecurityGroup"
               }
            ],
            "UserData":{
               "Fn::Base64":{
                  "Fn::Join":[
                     "",
                     [
                        "Content-Type: multipart\/mixed; boundary=\"===============5189065377222898407==\"",
                        "\n",
                        "MIME-Version: 1.0",
                        "\n",
                        "",
                        "\n",
                        "--===============5189065377222898407==",
                        "\n",
                        "Content-Type: text\/cloud-config; charset=\"us-ascii\"",
                        "\n",
                        "MIME-Version: 1.0",
                        "\n",
                        "Content-Transfer-Encoding: 7bit",
                        "\n",
                        "Content-Disposition: attachment; filename=\"cloud-config.txt\"",
                        "\n",
                        "",
                        "\n",
                        "#cloud-config",
                        "\n",
                        "repo_upgrade: none",
                        "\n",
                        "repo_releasever: ",
                        {
                           "Fn::FindInMap":[
                              "ContainerMeta",
                              "AMIMeta",
                              "RepoReleaseVersion"
                           ]
                        },
                        "\n",
                        {
                           "Fn::FindInMap":[
                              "AWSEBOptions",
                              "options",
                              "CloudConfigOptions"
                           ]
                        },
                        "\n",
                        "",
                        "\n",
                        "--===============5189065377222898407==",
                        "\n",
                        "Content-Type: text\/x-shellscript; charset=\"us-ascii\"",
                        "\n",
                        "MIME-Version: 1.0",
                        "\n",
                        "Content-Transfer-Encoding: 7bit",
                        "\n",
                        "Content-Disposition: attachment; filename=\"user-data.txt\"",
                        "\n\n",
                        "#!\/bin\/bash",
                        "\n",
                        "exec > >(tee -a \/var\/log\/eb-cfn-init.log|logger -t [eb-cfn-init] -s 2>\/dev\/console) 2>&1",
                        "\n",
                        "echo [`date -u +\"%Y-%m-%dT%H:%M:%SZ\"`] Started EB User Data",
                        "\n",
                        "set -x",
                        "\n",
                        "\n\n",
                        "function sleep_delay ",
                        "\n",
                        "{",
                        "\n",
                        "  if (( $SLEEP_TIME < $SLEEP_TIME_MAX )); then ",
                        "\n",
                        "    echo Sleeping $SLEEP_TIME",
                        "\n",
                        "    sleep $SLEEP_TIME  ",
                        "\n",
                        "    SLEEP_TIME=$(($SLEEP_TIME * 2)) ",
                        "\n",
                        "  else ",
                        "\n",
                        "    echo Sleeping $SLEEP_TIME_MAX  ",
                        "\n",
                        "    sleep $SLEEP_TIME_MAX  ",
                        "\n",
                        "  fi",
                        "\n",
                        "}",
                        "\n\n",
                        "# Executing bootstrap script",
                        "\n",
                        "SLEEP_TIME=10",
                        "\n",
                        "SLEEP_TIME_MAX=3600",
                        "\n",
                        "while true; do ",
                        "\n",
                        "  curl ",
                        {
                           "Fn::FindInMap":[
                              "AWSEBOptions",
                              "options",
                              "UserDataScript"
                           ]
                        },
                        " > \/tmp\/ebbootstrap.sh ",
                        "\n",
                        "  RESULT=$?",
                        "\n",
                        "  if [[ \"$RESULT\" -ne 0 ]]; then ",
                        "\n",
                        "    sleep_delay ",
                        "\n",
                        "  else",
                        "\n",
                        "    \/bin\/bash \/tmp\/ebbootstrap.sh ",
                        "    '",
                        {
                           "Fn::FindInMap":[
                              "AWSEBOptions",
                              "options",
                              "pythonlibs"
                           ]
                        },
                        "'",
                        "    '",
                        {
                           "Fn::FindInMap":[
                              "AWSEBOptions",
                              "options",
                              "rpms"
                           ]
                        },
                        "'",
                        "    '",
                        {
                           "Fn::FindInMap":[
                              "AWSEBOptions",
                              "options",
                              "tarballs"
                           ]
                        },
                        "'",
                        "    '",
                        {
                           "Fn::FindInMap":[
                              "AWSEBOptions",
                              "options",
                              "ebgems"
                           ]
                        },
                        "'",
                        "    '",
                        {
                           "Ref":"AWSEBInstanceLaunchWaitHandle"
                        },
                        "'",
                        "    '",
                        {
                           "Ref":"AWS::StackId"
                        },
                        "'",
                        "    '",
                        {
                           "Ref":"AWS::Region"
                        },
                        "'",
                        "    '",
                        {
                           "Fn::FindInMap":[
                              "AWSEBOptions",
                              "options",
                              "guid"
                           ]
                        },
                        "'",
                        "    && ",
                        "\n",
                        "    exit 0  ",
                        "\n",
                        "  fi ",
                        "\n",
                        "done",
                        "\n\n",
                        "--===============5189065377222898407==-- "
                     ]
                  ]
               }
            },
            "InstanceType":{
               "Ref":"InstanceType"
            }
         }
      },
      "AWSEBLoadBalancer":{
         "Type":"AWS::ElasticLoadBalancing::LoadBalancer",
         "Properties":{
            "AvailabilityZones":[
               "us-west-2b",
               "us-west-2c",
               "us-west-2a"
            ],
            "Listeners":[
               {
                  "LoadBalancerPort":"80",
                  "InstancePort":{
                     "Ref":"InstancePort"
                  },
                  "Protocol":"HTTP"
               }
            ],
            "HealthCheck":{
               "Timeout":"5",
               "Interval":"30",
               "Target":{
                  "Fn::Join":[
                     "",
                     [
                        "TCP",
                        ":",
                        {
                           "Ref":"InstancePort"
                        }
                     ]
                  ]
               },
               "HealthyThreshold":"3",
               "UnhealthyThreshold":"5"
            },
            "ConnectionDrainingPolicy":{
               "Enabled":true,
               "Timeout":20
            },
            "CrossZone":true
         }
      },
      "AWSEBInstanceLaunchWaitCondition":{
         "Type":"AWS::CloudFormation::WaitCondition",
         "DependsOn":"AWSEBAutoScalingGroup",
         "Properties":{
            "Handle":{
               "Ref":"AWSEBInstanceLaunchWaitHandle"
            },
            "Timeout":"900",
            "Count":"1"
         }
      },
      "AWSEBAutoScalingGroup":{
         "Type":"AWS::AutoScaling::AutoScalingGroup",
         "Metadata":{
            "AWS::ElasticBeanstalk::Ext":{
               "_EnvironmentInfoTaskMapping":"EnvironmentInfoTasks",
               "_TriggersConfig":{
                  "applicationDeploy":{
                     "_Command":"CMD-AppDeploy",
                     "_WatchGroups":[
                        "_TriggerAppDeployment"
                     ]
                  },
                  "configDeploy":{
                     "_Command":"CMD-ConfigDeploy",
                     "_WatchGroups":[
                        "_TriggerConfigDeployment"
                     ]
                  }
               },
               "_ParameterTriggers":{
                  "_TriggerAppDeployment":[
                     "AppSource"
                  ],
                  "_TriggerConfigDeployment":[
                     "EnvironmentVariables",
                     "InstancePort",
                     "LogPublicationControl",
                     "DocumentRoot",
                     "MemoryLimit",
                     "ZlibOutputCompression",
                     "AllowUrlFopen",
                     "DisplayErrors",
                     "MaxExecutionTime",
                     "ComposerOptions"
                  ]
               },
               "_ContainerConfigFileContent":{
                  "system":{
                     "LogPublicationControl":{
                        "Ref":"LogPublicationControl"
                     },
                     "AWSEBReferrerId":{
                        "Ref":"AWSEBReferrerId"
                     },
                     "AWSEBAgentId":{
                        "Ref":"AWSEBAgentId"
                     }
                  },
                  "container":{
                     "app_support_dir":"\/var\/app\/support",
                     "app_assets_dir":"\/var\/app\/support\/assets",
                     "app_logs_dir":"\/var\/app\/support\/logs",
                     "app_pids_dir":"\/var\/app\/support\/pids",
                     "source_bundle":"\/opt\/elasticbeanstalk\/deploy\/appsource\/source_bundle",
                     "app_deploy_dir":"\/var\/app\/current",
                     "php_version":{
                        "Fn::FindInMap":[
                           "AWSEBOptions",
                           "options",
                           "PhpVersion"
                        ]
                     },
                     "instance_port":{
                        "Ref":"InstancePort"
                     },
                     "app_staging_dir":"\/var\/app\/ondeck",
                     "http_port":"80",
                     "app_user":"webapp",
                     "app_base_dir":"\/var\/app"
                  },
                  "optionsettings":{
                     "aws:elasticbeanstalk:container:php:phpini":{
                        "composer_options":{
                           "Ref":"ComposerOptions"
                        },
                        "allow_url_fopen":{
                           "Ref":"AllowUrlFopen"
                        },
                        "max_execution_time":{
                           "Ref":"MaxExecutionTime"
                        },
                        "display_errors":{
                           "Ref":"DisplayErrors"
                        },
                        "memory_limit":{
                           "Ref":"MemoryLimit"
                        },
                        "zlib_output_compression":{
                           "Ref":"ZlibOutputCompression"
                        },
                        "document_root":{
                           "Ref":"DocumentRoot"
                        }
                     },
                     "aws:elasticbeanstalk:hostmanager":{
                        "LogPublicationControl":{
                           "Ref":"LogPublicationControl"
                        }
                     },
                     "aws:elasticbeanstalk:application:environment":{
                        "Ref":"EnvironmentVariables"
                     }
                  },
                  "commands":{
                     "CMD-ConfigDeploy":{
                        "stages":[
                           {
                              "name":"ConfigDeployStage0",
                              "actions":[
                                 {
                                    "name":"InfraWriteConfig",
                                    "value":"writeruntimeconfig",
                                    "type":"infra"
                                 },
                                 {
                                    "name":"ConfigDeployPreHook",
                                    "value":"configdeploy\/pre",
                                    "type":"hook"
                                 }
                              ]
                           },
                           {
                              "name":"ConfigDeployStage1",
                              "actions":[
                                 {
                                    "name":"ConfigDeployEnactHook",
                                    "value":"configdeploy\/enact",
                                    "type":"hook"
                                 },
                                 {
                                    "name":"ConfigDeployPostHook",
                                    "value":"configdeploy\/post",
                                    "type":"hook"
                                 }
                              ]
                           }
                        ]
                     },
                     "CMD-BundleLogs":{
                        "stages":[
                           {
                              "name":"BundleLogs",
                              "actions":[
                                 {
                                    "name":"BundleLogs",
                                    "value":"bundleLogs.py --conf-path '\/opt\/elasticbeanstalk\/tasks\/bundlelogs.d\/*' --location-prefix 'resources\/environments\/logs\/bundle\/'",
                                    "type":"sh"
                                 }
                              ]
                           }
                        ]
                     },
                     "CMD-SelfStartup":{
                        "stages":[
                           {
                              "name":"StartupStage0",
                              "leader_election":false,
                              "actions":[
                                 {
                                    "name":"EbExtensionPreBuild",
                                    "value":"embeddedprebuild",
                                    "type":"infra"
                                 },
                                 {
                                    "name":"AppDeployPreHook",
                                    "value":"appdeploy\/pre",
                                    "type":"hook"
                                 },
                                 {
                                    "name":"EbExtensionPostBuild",
                                    "value":"embeddedpostbuild",
                                    "type":"infra"
                                 },
                                 {
                                    "name":"InfraCleanEbextension",
                                    "value":"cleanebextensions",
                                    "type":"infra"
                                 }
                              ]
                           },
                           {
                              "name":"StartupStage1",
                              "actions":[
                                 {
                                    "name":"AppDeployEnactHook",
                                    "value":"appdeploy\/enact",
                                    "type":"hook"
                                 },
                                 {
                                    "name":"AppDeployPostHook",
                                    "value":"appdeploy\/post",
                                    "type":"hook"
                                 },
                                 {
                                    "name":"PostInitHook",
                                    "value":"postinit",
                                    "type":"hook"
                                 }
                              ]
                           }
                        ]
                     },
                     "CMD-SystemTailLogs":{
                        "stages":[
                           {
                              "name":"SystemTailLogs",
                              "actions":[
                                 {
                                    "name":"SystemTailLogs",
                                    "value":"tailLogs.py --concatenate --conf-path '\/opt\/elasticbeanstalk\/tasks\/systemtaillogs.d\/*' --location-prefix 'resources\/environments\/logs\/systemtail\/'",
                                    "type":"sh"
                                 }
                              ]
                           }
                        ]
                     },
                     "CMD-TailLogs":{
                        "stages":[
                           {
                              "name":"TailLogs",
                              "actions":[
                                 {
                                    "name":"TailLogs",
                                    "value":"tailLogs.py --concatenate --conf-path '\/opt\/elasticbeanstalk\/tasks\/taillogs.d\/*' --location-prefix 'resources\/environments\/logs\/tail\/'",
                                    "type":"sh"
                                 }
                              ]
                           }
                        ]
                     },
                     "CMD-PreInit":{
                        "stages":[
                           {
                              "name":"PreInitStage0",
                              "actions":[
                                 {
                                    "name":"InfraWriteConfig",
                                    "value":"writeruntimeconfig",
                                    "type":"infra"
                                 },
                                 {
                                    "name":"InfraWriteApp1",
                                    "value":"writeapplication1",
                                    "type":"infra"
                                 },
                                 {
                                    "name":"InfraWriteApp2",
                                    "value":"writeapplication2",
                                    "type":"infra"
                                 },
                                 {
                                    "name":"PreInitHook",
                                    "value":"preinit",
                                    "type":"hook"
                                 }
                              ]
                           }
                        ]
                     },
                     "CMD-RestartAppServer":{
                        "stages":[
                           {
                              "name":"RestartAppServerStage0",
                              "actions":[
                                 {
                                    "name":"InfraWriteConfig",
                                    "value":"writeruntimeconfig",
                                    "type":"infra"
                                 },
                                 {
                                    "name":"RestartAppServerPreHook",
                                    "value":"restartappserver\/pre",
                                    "type":"hook"
                                 }
                              ]
                           },
                           {
                              "name":"RestartAppServerStage1",
                              "actions":[
                                 {
                                    "name":"RestartAppServerEnactHook",
                                    "value":"restartappserver\/enact",
                                    "type":"hook"
                                 },
                                 {
                                    "name":"RestartAppServerPostHook",
                                    "value":"restartappserver\/post",
                                    "type":"hook"
                                 }
                              ]
                           }
                        ]
                     },
                     "CMD-Startup":{
                        "stages":[
                           {
                              "name":"StartupStage0",
                              "leader_election":true,
                              "actions":[
                                 {
                                    "name":"EbExtensionPreBuild",
                                    "value":"embeddedprebuild",
                                    "type":"infra"
                                 },
                                 {
                                    "name":"AppDeployPreHook",
                                    "value":"appdeploy\/pre",
                                    "type":"hook"
                                 },
                                 {
                                    "name":"EbExtensionPostBuild",
                                    "value":"embeddedpostbuild",
                                    "type":"infra"
                                 },
                                 {
                                    "name":"InfraCleanEbExtension",
                                    "value":"cleanebextensions",
                                    "type":"infra"
                                 }
                              ]
                           },
                           {
                              "name":"StartupStage1",
                              "actions":[
                                 {
                                    "name":"AppDeployEnactHook",
                                    "value":"appdeploy\/enact",
                                    "type":"hook"
                                 },
                                 {
                                    "name":"AppDeployPostHook",
                                    "value":"appdeploy\/post",
                                    "type":"hook"
                                 },
                                 {
                                    "name":"PostInitHook",
                                    "value":"postinit",
                                    "type":"hook"
                                 }
                              ]
                           }
                        ]
                     },
                     "CMD-PublishLogs":{
                        "stages":[
                           {
                              "name":"PublishLogs",
                              "actions":[
                                 {
                                    "name":"PublishLogs",
                                    "value":"publishLogs.py --de-dupe --conf-path '\/opt\/elasticbeanstalk\/tasks\/publishlogs.d\/*' --location-prefix 'resources\/environments\/logs\/publish\/' --num-concurrent 2",
                                    "type":"sh"
                                 }
                              ]
                           }
                        ]
                     },
                     "CMD-AppDeploy":{
                        "stages":[
                           {
                              "name":"AppDeployStage0",
                              "leader_election":true,
                              "actions":[
                                 {
                                    "name":"InfraWriteConfig",
                                    "value":"writeruntimeconfig",
                                    "type":"infra"
                                 },
                                 {
                                    "name":"InfraWriteApp1",
                                    "value":"writeapplication1",
                                    "type":"infra"
                                 },
                                 {
                                    "name":"InfraWriteApp2",
                                    "value":"writeapplication2",
                                    "type":"infra"
                                 },
                                 {
                                    "name":"EbExtensionPreBuild",
                                    "value":"embeddedprebuild",
                                    "type":"infra"
                                 },
                                 {
                                    "name":"AppDeployPreHook",
                                    "value":"appdeploy\/pre",
                                    "type":"hook"
                                 },
                                 {
                                    "name":"EbExtensionPostBuild",
                                    "value":"embeddedpostbuild",
                                    "type":"infra"
                                 },
                                 {
                                    "name":"InfraCleanEbextension",
                                    "value":"cleanebextensions",
                                    "type":"infra"
                                 }
                              ]
                           },
                           {
                              "name":"AppDeployStage1",
                              "actions":[
                                 {
                                    "name":"AppDeployEnactHook",
                                    "value":"appdeploy\/enact",
                                    "type":"hook"
                                 },
                                 {
                                    "name":"AppDeployPostHook",
                                    "value":"appdeploy\/post",
                                    "type":"hook"
                                 }
                              ]
                           }
                        ]
                     }
                  }
               },
               "_LaunchS3URL":"https:\/\/s3-us-west-2.amazonaws.com\/elasticbeanstalk-us-west-2-292052990214\/resources\/environments\/e-tmumus2mmu\/dev-env_LaunchFile",
               "_API":{
                  "_Commands":{
                     "CMD-BundleLogs":{
                        "_Stages":{
                           "01_enact":[
                              "InfoTask-BundleLogs"
                           ]
                        }
                     },
                     "CMD-ConfigDeploy":{
                        "_Stages":{
                           "02_enact":[

                           ],
                           "01_pre":[

                           ]
                        },
                        "_RunStaged":"true"
                     },
                     "CMD-SystemTailLogs":{
                        "_Stages":{
                           "01_enact":[
                              "InfoTask-SystemTailLogs"
                           ]
                        }
                     },
                     "CMD-TailLogs":{
                        "_Stages":{
                           "01_enact":[
                              "InfoTask-TailLogs"
                           ]
                        }
                     },
                     "CMD-Startup":{
                        "_Stages":{
                           "02_enact":[

                           ],
                           "01_pre":[

                           ]
                        },
                        "_RunStaged":"true"
                     },
                     "CMD-RestartAppServer":{
                        "_Stages":{
                           "02_enact":[

                           ],
                           "01_enact":[

                           ]
                        },
                        "_RunStaged":"false"
                     },
                     "CMD-AppDeploy":{
                        "_Stages":{
                           "02_enact":[

                           ],
                           "01_pre":[

                           ]
                        },
                        "_RunStaged":"true"
                     }
                  }
               },
               "AvailabilityZoneCount":"Any",
               "_AppSourceUrlFileContent":{
                  "url":{
                     "Ref":"AppSource"
                  }
               }
            },
            "AWS::CloudFormation::Init":{
               "Infra-WriteApplication1":{
                  "commands":{
                     "01mkdir":{
                        "command":"rm -rf \/opt\/elasticbeanstalk\/deploy\/appsource\/; mkdir -p \/opt\/elasticbeanstalk\/deploy\/appsource\/"
                     }
                  }
               },
               "Infra-WritePublishLogsCron":{
                  "files":{
                     "\/etc\/cron.d\/publishlogs":{
                        "content":{
                           "Fn::Join":[
                              "",
                              [
                                 "SHELL=\/bin\/bash",
                                 "\n",
                                 "PATH=\/sbin:\/bin:\/usr\/sbin:\/usr\/bin",
                                 "\n",
                                 "MAILTO=\"\"",
                                 "\n",
                                 "HOME=\/",
                                 "\n",
                                 "10,30,50 * * * * root ",
                                 "publishLogs.py --de-dupe --conf-path '\/opt\/elasticbeanstalk\/tasks\/publishlogs.d\/*' --location-prefix ",
                                 {
                                    "Fn::FindInMap":[
                                       "EnvironmentInfoTasks",
                                       "publish",
                                       "LocationPrefix"
                                    ]
                                 },
                                 " --num-concurrent 2",
                                 "\n",
                                 "05,25,45 * * * * root ",
                                 "clearStaleLogPublishingRecords.py",
                                 "\n"
                              ]
                           ]
                        },
                        "mode":"000644"
                     }
                  }
               },
               "Infra-WriteBundleLogsConf":{
                  "files":{
                     "\/opt\/elasticbeanstalk\/tasks\/bundlelogs.d\/eb-system.conf":{
                        "content":{
                           "Fn::Join":[
                              "\n",
                              [
                                 "\/var\/log\/eb-cfn-init*",
                                 "\/var\/log\/eb-tools*",
                                 "\/var\/log\/eb-publish-logs*",
                                 "\/var\/log\/eb-commandprocessor*",
                                 "\/var\/log\/eb-activity*",
                                 ""
                              ]
                           ]
                        },
                        "mode":"000644"
                     },
                     "\/opt\/elasticbeanstalk\/tasks\/bundlelogs.d\/cfn-system.conf":{
                        "content":{
                           "Fn::Join":[
                              "\n",
                              [
                                 "\/var\/log\/cfn-hup*",
                                 "\/var\/log\/cfn-init*",
                                 ""
                              ]
                           ]
                        },
                        "mode":"000644"
                     },
                     "\/opt\/elasticbeanstalk\/tasks\/bundlelogs.d\/eb-version-deployment.conf":{
                        "content":{
                           "Fn::Join":[
                              "\n",
                              [
                                 "\/var\/log\/eb-version-deployment.log",
                                 ""
                              ]
                           ]
                        }
                     },
                     "\/opt\/elasticbeanstalk\/tasks\/bundlelogs.d\/cloud-init-system.conf":{
                        "content":{
                           "Fn::Join":[
                              "\n",
                              [
                                 "\/var\/log\/cloud-init*",
                                 ""
                              ]
                           ]
                        },
                        "mode":"000644"
                     },
                     "\/opt\/elasticbeanstalk\/tasks\/bundlelogs.d\/system.conf":{
                        "content":{
                           "Fn::Join":[
                              "\n",
                              [
                                 "\/var\/log\/cron",
                                 "\/var\/log\/messages",
                                 "\/var\/log\/yum.log",
                                 ""
                              ]
                           ]
                        },
                        "mode":"000644"
                     }
                  }
               },
               "AWSEBBaseConfig":{
                  "files":{
                     "\/etc\/init\/cfn-hup.conf":{
                        "content":{
                           "Fn::Join":[
                              "\n",
                              [
                                 "stop on runlevel [016]",
                                 "respawn",
                                 "script",
                                 "  \/opt\/aws\/bin\/cfn-hup",
                                 "end script"
                              ]
                           ]
                        },
                        "owner":"root",
                        "group":"root",
                        "mode":"000400"
                     },
                     "\/etc\/elasticbeanstalk\/.aws-eb-stack.properties":{
                        "content":{
                           "Fn::Join":[
                              "",
                              [
                                 "environment_id=",
                                 {
                                    "Ref":"AWSEBEnvironmentId"
                                 },
                                 "\n",
                                 "environment_bucket=",
                                 {
                                    "Ref":"AWSEBEnvironmentBucket"
                                 },
                                 "\n",
                                 "stack_name=",
                                 {
                                    "Ref":"AWS::StackId"
                                 },
                                 "\n",
                                 "resource=",
                                 "AWSEBAutoScalingGroup",
                                 "\n",
                                 "region=",
                                 {
                                    "Ref":"AWS::Region"
                                 },
                                 "\n\n"
                              ]
                           ]
                        },
                        "owner":"root",
                        "group":"root",
                        "mode":"000440"
                     },
                     "\/etc\/cfn\/cfn-hup.conf":{
                        "content":{
                           "Fn::Join":[
                              "",
                              [
                                 "[main]",
                                 "\n",
                                 "stack=",
                                 {
                                    "Ref":"AWS::StackId"
                                 },
                                 "\n",
                                 "region=",
                                 {
                                    "Ref":"AWS::Region"
                                 },
                                 "\n",
                                 "verbose=true\n",
                                 "multi-threaded=false\n"
                              ]
                           ]
                        },
                        "owner":"root",
                        "group":"root",
                        "mode":"000400"
                     },
                     "\/etc\/cfn\/hooks.d\/aws-eb-command-handler.conf":{
                        "content":{
                           "Fn::Join":[
                              "",
                              [
                                 "[aws-eb-command-handler]",
                                 "\n",
                                 "triggers=on.command",
                                 "\n",
                                 "path=ElasticBeanstalkCommand-",
                                 "AWSEBAutoScalingGroup",
                                 "\n",
                                 "action=\/opt\/elasticbeanstalk\/bin\/command-processor",
                                 "\n"
                              ]
                           ]
                        }
                     }
                  },
                  "commands":{
                     "clearbackupfiles":{
                        "command":"rm -f \/etc\/cfn\/hooks.d\/*.bak"
                     }
                  }
               },
               "Infra-WriteApplication2":{
                  "files":{
                     "\/opt\/elasticbeanstalk\/bin\/download_source_bundle":{
                        "source":{
                           "Fn::Select":[
                              0,
                              {
                                 "Fn::FindInMap":[
                                    "AWSEBOptions",
                                    "options",
                                    "downloadSourceBundleScriptLocation"
                                 ]
                              }
                           ]
                        },
                        "owner":"root",
                        "group":"root",
                        "mode":"000750"
                     }
                  },
                  "commands":{
                     "01downloadVersion":{
                        "command":"\/opt\/elasticbeanstalk\/bin\/download_source_bundle"
                     },
                     "02deleteVersionDownloadScriptFile":{
                        "command":"rm \/opt\/elasticbeanstalk\/bin\/download_source_bundle"
                     }
                  }
               },
               "InfoTask-TailLogs":{
                  "commands":{
                     "taillogs":{
                        "command":{
                           "Fn::Join":[
                              "",
                              [
                                 "tailLogs.py --concatenate --conf-path '\/opt\/elasticbeanstalk\/tasks\/taillogs.d\/*' --location-prefix ",
                                 {
                                    "Fn::FindInMap":[
                                       "EnvironmentInfoTasks",
                                       "tail",
                                       "LocationPrefix"
                                    ]
                                 }
                              ]
                           ]
                        }
                     }
                  }
               },
               "InfoTask-BundleLogs":{
                  "commands":{
                     "bundlelogs":{
                        "command":{
                           "Fn::Join":[
                              "",
                              [
                                 "bundleLogs.py --conf-path '\/opt\/elasticbeanstalk\/tasks\/bundlelogs.d\/*' --location-prefix ",
                                 {
                                    "Fn::FindInMap":[
                                       "EnvironmentInfoTasks",
                                       "bundle",
                                       "LocationPrefix"
                                    ]
                                 }
                              ]
                           ]
                        }
                     }
                  }
               },
               "Infra-InstallBaseHooksPkg":{
                  "sources":{
                     "\/opt\/elasticbeanstalk":"https:\/\/s3-us-west-2.amazonaws.com\/elasticbeanstalk-env-resources-us-west-2\/stalks\/eb_php_3.1.1\/lib\/basehooks.tar.gz"
                  }
               },
               "Hook-PreAppDeploy":{
                  "commands":{
                     "hooks":{
                        "command":"echo place holder"
                     }
                  }
               },
               "configSets":{
                  "_OnInstanceBoot":[
                     "AWSEBBaseConfig",
                     "Infra-InstallBaseHooksPkg",
                     "Infra-InstallContainerHooksPkg",
                     "Infra-WriteLeaderTestScript",
                     "Infra-WriteTailLogsConf",
                     "Infra-WriteSystemTailLogsConf",
                     "Infra-WriteBundleLogsConf",
                     "Infra-WritePublishLogsConf",
                     "Infra-WritePublishLogsCron"
                  ],
                  "Infra-WriteApplication1":[
                     "Infra-WriteApplication1"
                  ],
                  "Infra-WritePublishLogsCron":[
                     "Infra-WritePublishLogsCron"
                  ],
                  "Infra-WriteBundleLogsConf":[
                     "Infra-WriteBundleLogsConf"
                  ],
                  "Infra-EmbeddedPostBuild":[

                  ],
                  "Infra-WriteApplication2":[
                     "Infra-WriteApplication2"
                  ],
                  "InfoTask-TailLogs":[
                     "InfoTask-TailLogs"
                  ],
                  "_AppInstall":[
                     "Hook-PreAppDeploy"
                  ],
                  "_OnInstanceReboot":[
                     "AWSEBBaseConfig"
                  ],
                  "InfoTask-BundleLogs":[
                     "InfoTask-BundleLogs"
                  ],
                  "Infra-EmbeddedPreBuild":[

                  ],
                  "Hook-PreAppDeploy":[
                     "Hook-PreAppDeploy"
                  ],
                  "InfoTask-SystemTailLogs":[
                     "InfoTask-SystemTailLogs"
                  ],
                  "Infra-WriteTailLogsConf":[
                     "Infra-WriteTailLogsConf"
                  ],
                  "Infra-WritePublishLogsConf":[
                     "Infra-WritePublishLogsConf"
                  ],
                  "Infra-WriteSystemTailLogsConf":[
                     "Infra-WriteSystemTailLogsConf"
                  ]
               },
               "Infra-WriteLeaderTestScript":{
                  "files":{
                     "\/opt\/elasticbeanstalk\/bin\/leader-test.sh":{
                        "content":{
                           "Fn::Join":[
                              "",
                              [
                                 "#!\/bin\/bash",
                                 "\n",
                                 "if [[ \"$EB_IS_COMMAND_LEADER\" == \"true\" ]]; then ",
                                 "\n",
                                 "  exit 0 ",
                                 "\n",
                                 "else  ",
                                 "\n",
                                 "  exit 1 ",
                                 "\n",
                                 "fi ",
                                 "\n"
                              ]
                           ]
                        },
                        "mode":"000755"
                     }
                  }
               },
               "Infra-InstallContainerHooksPkg":{
                  "sources":{
                     "\/opt\/elasticbeanstalk":{
                        "Ref":"HooksPkgUrl"
                     }
                  }
               },
               "InfoTask-SystemTailLogs":{
                  "commands":{
                     "systemtaillogs":{
                        "command":{
                           "Fn::Join":[
                              "",
                              [
                                 "tailLogs.py --conf-path '\/opt\/elasticbeanstalk\/tasks\/systemtaillogs.d\/*' --location-prefix ",
                                 {
                                    "Fn::FindInMap":[
                                       "EnvironmentInfoTasks",
                                       "systemtail",
                                       "LocationPrefix"
                                    ]
                                 }
                              ]
                           ]
                        }
                     }
                  }
               },
               "Infra-WriteTailLogsConf":{
                  "files":{
                     "\/opt\/elasticbeanstalk\/tasks\/taillogs.d\/cfn-system.conf":{
                        "content":{
                           "Fn::Join":[
                              "\n",
                              [
                                 "\/var\/log\/cfn-hup.log",
                                 "\/var\/log\/cfn-init.log",
                                 ""
                              ]
                           ]
                        },
                        "mode":"000644"
                     },
                     "\/opt\/elasticbeanstalk\/tasks\/taillogs.d\/eb-version-deployment.conf":{
                        "content":{
                           "Fn::Join":[
                              "\n",
                              [
                                 "\/var\/log\/eb-version-deployment.log",
                                 ""
                              ]
                           ]
                        }
                     },
                     "\/opt\/elasticbeanstalk\/tasks\/taillogs.d\/eb-system.conf":{
                        "content":{
                           "Fn::Join":[
                              "\n",
                              [
                                 "\/var\/log\/eb-cfn-init.log",
                                 "\/var\/log\/eb-tools.log",
                                 "\/var\/log\/eb-publish-logs.log",
                                 "\/var\/log\/eb-commandprocessor.log",
                                 "\/var\/log\/eb-activity.log",
                                 ""
                              ]
                           ]
                        },
                        "mode":"000644"
                     }
                  }
               },
               "Infra-WritePublishLogsConf":{
                  "files":{

                  }
               },
               "Infra-WriteSystemTailLogsConf":{
                  "files":{
                     "\/opt\/elasticbeanstalk\/tasks\/systemtaillogs.d\/eb-version-deployment.conf":{
                        "content":{
                           "Fn::Join":[
                              "\n",
                              [
                                 "\/var\/log\/eb-version-deployment.log",
                                 ""
                              ]
                           ]
                        }
                     },
                     "\/opt\/elasticbeanstalk\/tasks\/systemtaillogs.d\/eb-system.conf":{
                        "content":{
                           "Fn::Join":[
                              "\n",
                              [
                                 "\/var\/log\/eb-cfn-init.log",
                                 "\/var\/log\/eb-tools.log",
                                 "\/var\/log\/eb-publish-logs.log",
                                 "\/var\/log\/eb-commandprocessor.log",
                                 "\/var\/log\/eb-activity.log",
                                 ""
                              ]
                           ]
                        },
                        "mode":"000644"
                     },
                     "\/opt\/elasticbeanstalk\/tasks\/systemtaillogs.d\/system.conf":{
                        "content":{
                           "Fn::Join":[
                              "\n",
                              [
                                 "\/var\/log\/cron",
                                 "\/var\/log\/messages",
                                 "\/var\/log\/yum.log",
                                 ""
                              ]
                           ]
                        },
                        "mode":"000644"
                     },
                     "\/opt\/elasticbeanstalk\/tasks\/systemtaillogs.d\/cloud-init-system.conf":{
                        "content":{
                           "Fn::Join":[
                              "\n",
                              [
                                 "\/var\/log\/cloud-init.log",
                                 ""
                              ]
                           ]
                        },
                        "mode":"000644"
                     },
                     "\/opt\/elasticbeanstalk\/tasks\/systemtaillogs.d\/cfn-system.conf":{
                        "content":{
                           "Fn::Join":[
                              "\n",
                              [
                                 "\/var\/log\/cfn-hup.log",
                                 "\/var\/log\/cfn-init.log",
                                 ""
                              ]
                           ]
                        },
                        "mode":"000644"
                     }
                  }
               }
            }
         },
         "DependsOn":"AWSEBBeanstalkMetadata",
         "Properties":{
            "Tags":[
               {
                  "PropagateAtLaunch":true,
                  "Value":{
                     "Ref":"AWSEBEnvironmentName"
                  },
                  "Key":"elasticbeanstalk:environment-name"
               },
               {
                  "PropagateAtLaunch":true,
                  "Value":{
                     "Ref":"AWSEBEnvironmentName"
                  },
                  "Key":"Name"
               },
               {
                  "PropagateAtLaunch":true,
                  "Value":{
                     "Ref":"AWSEBEnvironmentId"
                  },
                  "Key":"elasticbeanstalk:environment-id"
               }
            ],
            "LoadBalancerNames":[
               {
                  "Ref":"AWSEBLoadBalancer"
               }
            ],
            "AvailabilityZones":[
               "us-west-2b",
               "us-west-2c",
               "us-west-2a"
            ],
            "MaxSize":"4",
            "Cooldown":"360",
            "LaunchConfigurationName":{
               "Ref":"AWSEBAutoScalingLaunchConfiguration"
            },
            "MinSize":"1"
         }
      },
      "AWSEBSecurityGroup":{
         "Type":"AWS::EC2::SecurityGroup",
         "Properties":{
            "GroupDescription":"SecurityGroup for ElasticBeanstalk environment.",
            "SecurityGroupIngress":[
               {
                  "IpProtocol":"tcp",
                  "SourceSecurityGroupName":{
                     "Fn::GetAtt":[
                        "AWSEBLoadBalancer",
                        "SourceSecurityGroup.GroupName"
                     ]
                  },
                  "ToPort":{
                     "Ref":"InstancePort"
                  },
                  "SourceSecurityGroupOwnerId":{
                     "Fn::GetAtt":[
                        "AWSEBLoadBalancer",
                        "SourceSecurityGroup.OwnerAlias"
                     ]
                  },
                  "FromPort":{
                     "Ref":"InstancePort"
                  }
               }
            ]
         }
      },
      "AWSEBInstanceLaunchWaitHandle":{
         "Type":"AWS::CloudFormation::WaitConditionHandle"
      },
      "AWSEBCloudwatchAlarmLow":{
         "Type":"AWS::CloudWatch::Alarm",
         "Properties":{
            "AlarmActions":[
               {
                  "Ref":"AWSEBAutoScalingScaleDownPolicy"
               }
            ],
            "Period":"300",
            "Statistic":"Average",
            "MetricName":"NetworkOut",
            "Threshold":"2000000",
            "EvaluationPeriods":"1",
            "Dimensions":[
               {
                  "Name":"AutoScalingGroupName",
                  "Value":{
                     "Ref":"AWSEBAutoScalingGroup"
                  }
               }
            ],
            "AlarmDescription":"ElasticBeanstalk Default Scale Down alarm",
            "Namespace":"AWS\/EC2",
            "ComparisonOperator":"LessThanThreshold"
         }
      },
      "AWSEBCloudwatchAlarmHigh":{
         "Type":"AWS::CloudWatch::Alarm",
         "Properties":{
            "AlarmActions":[
               {
                  "Ref":"AWSEBAutoScalingScaleUpPolicy"
               }
            ],
            "Period":"300",
            "Statistic":"Average",
            "MetricName":"NetworkOut",
            "Threshold":"6000000",
            "EvaluationPeriods":"1",
            "Dimensions":[
               {
                  "Name":"AutoScalingGroupName",
                  "Value":{
                     "Ref":"AWSEBAutoScalingGroup"
                  }
               }
            ],
            "AlarmDescription":"ElasticBeanstalk Default Scale Up alarm",
            "Namespace":"AWS\/EC2",
            "ComparisonOperator":"GreaterThanThreshold"
         }
      },
      "AWSEBAutoScalingScaleDownPolicy":{
         "Type":"AWS::AutoScaling::ScalingPolicy",
         "Properties":{
            "AutoScalingGroupName":{
               "Ref":"AWSEBAutoScalingGroup"
            },
            "ScalingAdjustment":"-1",
            "AdjustmentType":"ChangeInCapacity"
         }
      },
      "AWSEBAutoScalingScaleUpPolicy":{
         "Type":"AWS::AutoScaling::ScalingPolicy",
         "Properties":{
            "AutoScalingGroupName":{
               "Ref":"AWSEBAutoScalingGroup"
            },
            "ScalingAdjustment":"1",
            "AdjustmentType":"ChangeInCapacity"
         }
      },
      "AWSEBBeanstalkMetadata":{
         "Type":"AWS::CloudFormation::WaitConditionHandle",
         "Metadata":{
            "AWS::ElasticBeanstalk::Ext":{
               "Parameters":{
                  "HooksPkgUrl":{
                     "Ref":"HooksPkgUrl"
                  },
                  "LogPublicationControl":{
                     "Ref":"LogPublicationControl"
                  },
                  "AWSEBAgentId":{
                     "Ref":"AWSEBAgentId"
                  },
                  "AWSEBEnvironmentName":{
                     "Ref":"AWSEBEnvironmentName"
                  },
                  "AllowUrlFopen":{
                     "Ref":"AllowUrlFopen"
                  },
                  "MemoryLimit":{
                     "Ref":"MemoryLimit"
                  },
                  "InstanceType":{
                     "Ref":"InstanceType"
                  },
                  "AWSEBReferrerId":{
                     "Ref":"AWSEBReferrerId"
                  },
                  "DocumentRoot":{
                     "Ref":"DocumentRoot"
                  },
                  "InstancePort":{
                     "Ref":"InstancePort"
                  },
                  "DisplayErrors":{
                     "Ref":"DisplayErrors"
                  },
                  "AWSEBEnvironmentId":{
                     "Ref":"AWSEBEnvironmentId"
                  },
                  "MaxExecutionTime":{
                     "Ref":"MaxExecutionTime"
                  },
                  "AWSEBEnvironmentBucket":{
                     "Ref":"AWSEBEnvironmentBucket"
                  },
                  "ZlibOutputCompression":{
                     "Ref":"ZlibOutputCompression"
                  },
                  "AppSource":{
                     "Ref":"AppSource"
                  },
                  "ComposerOptions":{
                     "Ref":"ComposerOptions"
                  },
                  "EnvironmentVariables":{
                     "Ref":"EnvironmentVariables"
                  }
               }
            },
            "AWS::ElasticBeanstalk::Metadata":{
               "Name":"e-tmumus2mmu",
               "EnvironmentName":"dev-env",
               "Description":"TemplatePack for environment: dev-env",
               "RequestId":"4d7c2eb9-8c94-11e4-a6ed-7f91706545a4",
               "DateCreated":"2014-12-26T00:15:31",
               "DateUpdated":"2014-12-26T00:15:31",
               "EnvironmentId":"e-tmumus2mmu",
               "Version":"4d7c2eb9-8c94-11e4-a6ed-7f91706545a4"
            }
         }
      }
   }
}
